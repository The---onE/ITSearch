<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>IT搜索</title>
    <link rel="Icon" href="Content/favicon.ico">
    <!--Jquery文件-->
    <script src="Content/js/jquery/jquery.min.js"></script>
    <!--EasyUI js文件-->
    <script src="Content/js/jquery-easyui-1.4.4/jquery.easyui.min.js"></script>
    <script src="Content/js/jquery-easyui-1.4.4/jquery.easyui.plus.js"></script>
    <script src="Content/js/jquery-easyui-1.4.4/locale/easyui-lang-zh-CN.js"></script>
    <!--EasyUI 样式-->
    <link href="Content/css/jquery-easyui-1.4.4/base/easyui.css" rel="stylesheet" />
    <link href="Content/css/jquery-easyui-1.4.4/skin-purple.css" rel="stylesheet" />
    <!--自定义的图标样式-->
    <link href="Content/css/fontawesome/css/font-awesome.min.css" rel="stylesheet" />

    <script>
        var history = [];
        var count = 0;
        var index = -1;
        history[-1] = '';

        $(function () {
            $('#prev').click(function () {
                if (count > 0) {
                    index = index > -1 ? index - 1 : -1;
                    searchInFrame(history[index]);
                }
            });

            $('#next').click(function () {
                if (count > 0) {
                    index = index < count - 1 ? index + 1 : count - 1;
                    searchInFrame(history[index]);
                }
            });
        })

        function openWebsite(value, name) {
            var url = value
            var re = /https?:\/\/.+/i
            if (value.search(re) == -1) {
                url = "http://" + value;
            }

            $('#tt').tabs('add', {
                title: value,
                content: '<iframe frameborder="0" src=' + url + ' scrolling="auto" style="width:100%; height:100%; overflow:hidden; margin:auto"></iframe>',
                closable: true,
            });
        }

        function searchWebsite(value, name) {
            index++;
            count = index + 1;
            history[index] = value;
            searchInFrame(value);
        }

        function searchInFrame(value) {
            if (index != -1) {
                $('#search').searchbox({
                    value: value
                });
                $('#bing').attr('src', 'http://cn.bing.com/search?q=' + value);
                $('#csdn').attr('src', 'http://so.csdn.net/so/search/s.do?q=' + value);
                $('#36kr').attr('src', 'http://36kr.com/search/articles/' + value);
                $('#cnblogs').attr('src', 'http://zzk.cnblogs.com/s?t=b&w=' + value);
            } else {
                $('#search').searchbox({
                    value: ''
                });
                $('#bing').attr('src', 'http://www.bing.com/');
                $('#csdn').attr('src', 'http://www.csdn.net/');
                $('#36kr').attr('src', 'http://36kr.com/');
                $('#cnblogs').attr('src', 'http://www.cnblogs.com/');
            }

            if (index <= -1) {
                $('#prev').linkbutton({
                    disabled: true
                });
            } else {
                $('#prev').linkbutton({
                    disabled: false
                });
            }

            if (index >= count - 1) {
                $('#next').linkbutton({
                    disabled: true
                });
            } else {
                $('#next').linkbutton({
                    disabled: false
                });
            }
        }
    </script>
</head>
<body class="easyui-layout">
    <!-- 顶部面板 -->
    <div data-options="region:'north', split:false" style="height: 35px;">
        <input id="website" class="easyui-searchbox" style="height: 32px; width: 500px"
            data-options="searcher:openWebsite, prompt:'打开新网页'" />
        <input id="search" class="easyui-searchbox" style="height: 32px; width: 500px"
            data-options="searcher:searchWebsite, prompt:'请输入要搜索的内容'" />
        <a id="prev" class="easyui-linkbutton" data-options="disabled:true, text:'←'"></a>
        <a id="next" class="easyui-linkbutton" data-options="disabled:true, text:'→'"></a>
    </div>
    <!-- 右侧面板 -->
    <div data-options="region:'east',title:'记事板',split:true, collapsed:true" style="width: 200px;">
        <textarea style="width: 100%; height: 100%;"></textarea>
    </div>
    <!-- 主面板 -->
    <div data-options="region:'center'" style="padding: 0px;">
        <div id="tt" class="easyui-tabs" style="width: 100%; height: 99%;">

            <!-- 必应 -->
            <div title="Bing" data-options="closable:false" style="padding: 0px;">
                <iframe id="bing" frameborder="0" src="http://www.bing.com/" scrolling="auto" style="width: 100%; height: 100%; overflow: hidden; margin: auto"></iframe>
            </div>

            <!-- CSDN -->
            <div title="CSDN" data-options="closable:false" style="padding: 0px;">
                <iframe id='csdn' frameborder="0" src="http://www.csdn.net/" scrolling="auto" style="width: 100%; height: 100%; overflow: hidden; margin: auto"></iframe>
            </div>

            <!-- 36氪 -->
            <div title="36Kr" data-options="closable:false" style="padding: 0px;">
                <iframe id='36kr' frameborder="0" src="http://36kr.com/" scrolling="auto" style="width: 100%; height: 100%; overflow: hidden; margin: auto"></iframe>
            </div>

            <!-- 博客园 -->
            <div title="博客园" data-options="closable:false" style="padding: 0px;">
                <iframe id='cnblogs' frameborder="0" src="http://www.cnblogs.com/" scrolling="auto" style="width: 100%; height: 100%; overflow: hidden; margin: auto"></iframe>
            </div>
        </div>
    </div>
</body>
</html>
